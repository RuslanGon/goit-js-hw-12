{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.more');\nconst lightBox = new SimpleLightbox('.gallery-link');\nlet page = 1;\nlet perPage = 15;\nloadBtn.style.display = 'none';\nloader.style.display = 'none';\nconst searchParams = {\n  key: '42129451-ab1d1e3d1abd6a79c6499a83d',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: perPage,\n};\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  loadBtn.style.display = 'none';\n  gallery.innerHTML = '';\n  const inputText = form.elements.search.value.trim();\n  if (inputText === '') {\n    iziToast.show({\n      message: 'Please write search image',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n    return;\n  } else {\n    loader.style.display = 'inline-block';\n    searchParams.q = inputText;\n    searchParams.page = page;\n    try {\n      const images = await fetchImage();\n      if (images.totalHits === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#FAFAFB',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n        });\n        loader.style.display = 'none';\n      } else {\n        renderGallery(images);\n        if (images.totalHits < perPage) {\n          notification();\n        } else {\n          loadBtn.style.display = 'block';\n        }\n      }\n    } catch (error) {\n      iziToast.show({\n        message: `Sorry, ${error}`,\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n      });\n    }\n  }\n\n  form.reset();\n});\n\nloadBtn.addEventListener('click', async () => {\n  page += 1;\n  searchParams.page = page;\n  loader.style.display = 'inline-block';\n  try {\n    const images = await fetchImage();\n    renderGallery(images);\n    scroll();\n    if (perPage * page > images.totalHits) {\n      notification();\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Sorry, ${error}`,\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'bottomCenter',\n    });\n  }\n});\n\nasync function fetchImage() {\n  const urlparams = new URLSearchParams(searchParams);\n  const response = await axios.get(`https://pixabay.com/api/?${urlparams}`);\n  return response.data;\n}\n\nfunction renderGallery(images) {\n  const item = images.hits\n    .map(\n      image => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\" >\n      <img\n        class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n        width = \"360\"\n      />\n    </a>\n    <div class=\"img-text\">\n      <div class=\"img-info\">\n        <h3>Likes</h3>\n        <p> ${image.likes}</p>\n      </div>\n      <div class=\"img-info\">\n        <h3>Views</h3>\n        <p> ${image.views}</p>\n      </div>\n      <div class=\"img-info\">\n        <h3>Comments</h3>\n        <p> ${image.comments}</p>\n      </div>\n      <div class=\"img-info\">\n        <h3>Downloads</h3>\n        <p> ${image.downloads}</p>\n      </div>\n    </div>\n  </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', item);\n  lightBox.refresh();\n\n  loader.style.display = 'none';\n}\n\nfunction notification() {\n  iziToast.show({\n    message: 'We are sorry, but you have reached the end of search results.',\n    messageColor: '#FAFAFB',\n    backgroundColor: '#1DB8F5',\n    position: 'topRight',\n  });\n  loadBtn.style.display = 'none';\n  loader.style.display = 'none';\n}\n\nfunction scroll() {\n  const listItem = document.querySelector('.gallery-item');\n  const heightScroll = listItem.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: heightScroll,\n    left: 0,\n    behavior: 'smooth',\n  });\n}"],"names":["form","gallery","loader","loadBtn","lightBox","SimpleLightbox","page","perPage","searchParams","e","inputText","iziToast","images","fetchImage","renderGallery","notification","error","scroll","urlparams","axios","item","image","heightScroll"],"mappings":"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"}